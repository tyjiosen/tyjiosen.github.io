import{d as F,n as E,h as u,E as c,i as N,o as m,c as b,j as V,w as n,b as s,F as R,e as v,a as g,m as B,g as y,_ as $}from"./index-C07rQK9F.js";const A={class:"file-conent"},D=["src"],L={class:"x-tips"},j={class:"file-conent"},M=["src"],h={class:"x-tips"},P=F({__name:"ImgBase64View",setup(q){E(()=>{document.addEventListener("paste",U)});const d=u(""),p=u(""),k=u(),_=u(!0),w=u(""),f=u(""),C=()=>{var a;(a=k.value)==null||a.click()},I=a=>{const e=a.target.files[0];if(!e||!e.type.includes("image")){c.error("请选择图片");return}const l=new FileReader;l.onload=t=>{var o,r;d.value=(o=t.target)==null?void 0:o.result,p.value=(r=t.target)==null?void 0:r.result},l.readAsDataURL(e)},T=async()=>{try{await navigator.clipboard.writeText(d.value),c.success("Base64内容已复制")}catch(a){c.error("复制失败: "+a.message)}},U=a=>{if(!_.value)return;const l=a.clipboardData.items[0];if(console.log(l),l.kind!=="file"||!l.type.includes("image")){c.error("请复制图片或者图片url");return}const t=l.getAsFile(),o=new FileReader;o.onload=r=>{var i,x;d.value=(i=r.target)==null?void 0:i.result,p.value=(x=r.target)==null?void 0:x.result},o.readAsDataURL(t)};return N(()=>w.value,a=>{var e;if(a||(f.value=""),!/^data:image\/(jpeg|png|gif|webp);base64,/.test(a)){c.error("请以 data:image/图片类型;base64, 开头");return}try{const l=a.replace(/\n/g,"").replace(/\s/g,"").replace(/^data:image\/\w+;base64,/,""),t=((e=a.match(/image\/\w+/))==null?void 0:e[0])||"image/png";f.value=`data:${t};base64,${l}`}catch(l){c.error("Base64转换失败: "+l.message),p.value=""}}),(a,e)=>{const l=v("el-button"),t=v("el-col"),o=v("el-row"),r=v("el-input");return m(),b(R,null,[_.value?(m(),V(o,{key:0,class:"img-base64-main"},{default:n(()=>[s(t,{span:12},{default:n(()=>[g("div",A,[p.value?(m(),b("img",{key:0,id:"preview",alt:"",src:p.value},null,8,D)):B("",!0),g("div",L,[s(o,{class:"tips-main"},{default:n(()=>[s(t,{span:24},{default:n(()=>[s(l,{type:"primary",onClick:C},{default:n(()=>e[4]||(e[4]=[y("选择图片")])),_:1})]),_:1}),s(t,{span:24,class:"mt-20 tips-content"},{default:n(()=>e[5]||(e[5]=[y(" 或者选择一张图片拖拽图片到这里来 ")])),_:1}),s(t,{span:24,class:"tips-content"},{default:n(()=>e[6]||(e[6]=[y(" 或者截屏、复制文件后粘贴 ")])),_:1}),g("input",{type:"file",onChange:I,ref_key:"fileInput",ref:k,style:{display:"none"}},null,544)]),_:1})])])]),_:1}),s(t,{span:12},{default:n(()=>[s(r,{type:"textarea",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=i=>d.value=i),rows:19,readonly:"",onClick:e[1]||(e[1]=i=>T())},null,8,["modelValue"])]),_:1})]),_:1})):(m(),V(o,{key:1,class:"img-base64-main"},{default:n(()=>[s(t,{span:12},{default:n(()=>[s(r,{type:"textarea",modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=i=>w.value=i),rows:19},null,8,["modelValue"])]),_:1}),s(t,{span:12},{default:n(()=>[g("div",j,[f.value?(m(),b("img",{key:0,id:"preview",alt:"",src:f.value},null,8,M)):B("",!0),g("div",h,[s(o,{class:"tips-main"})])])]),_:1})]),_:1})),s(o,{class:"img-base64-header"},{default:n(()=>[s(t,{span:24,onClick:e[3]||(e[3]=i=>_.value=!_.value)},{default:n(()=>e[7]||(e[7]=[y(" 切换为Base64转图片 ")])),_:1})]),_:1})],64)}}}),G=$(P,[["__scopeId","data-v-97c01a23"]]);export{G as default};
